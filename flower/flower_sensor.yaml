substitutions:
  fl1_mac: "FF:FF:FF:FF:FF:FF"
  fl2_mac: "FF:FF:FF:FF:FF:FF"
  fl3_mac: "FF:FF:FF:FF:FF:FF"
  fl4_mac: "FF:FF:FF:FF:FF:FF"

globals:
  - id: flower1_mac
    type: std::string
    restore_value: true
    max_restore_data_length: 17
    initial_value: '"FF:FF:FF:FF:FF:FF"'
  - id: flower2_mac
    type: std::string
    restore_value: true
    max_restore_data_length: 17
    initial_value: '"FF:FF:FF:FF:FF:FF"'
  - id: flower3_mac
    type: std::string
    restore_value: true
    max_restore_data_length: 17
    initial_value: '"FF:FF:FF:FF:FF:FF"'
  - id: flower4_mac
    type: std::string
    restore_value: true
    max_restore_data_length: 17
    initial_value: '"FF:FF:FF:FF:FF:FF"'
  - id: flower1_sensor_model
    type: int
    restore_value: yes
    initial_value: '1'
  - id: flower2_sensor_model
    type: int
    restore_value: yes
    initial_value: '1'
  - id: flower3_sensor_model
    type: int
    restore_value: yes
    initial_value: '1'
  - id: flower4_sensor_model
    type: int
    restore_value: yes
    initial_value: '1'

esp32_ble:
  disable_bt_logs: true
  connection_timeout: 20s 
  max_connections: 3
esp32_ble_tracker:

esphome:
  on_boot:
    priority: -10
    then:
      - lambda: |-
          auto parse_mac = [](std::string mac) -> uint64_t {
            uint64_t value = 0;
            int byte_val;
            for (int i = 0; i < 6; i++) {
              sscanf(mac.c_str() + i * 3, "%2x", &byte_val);
              value = (value << 8) | (byte_val & 0xFF);
            }
            return value;
          };
          ESP_LOGI("boot", "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ MAC –∞–¥—Ä–µ—Å–æ–≤ –∏–∑ globals:");
          id(fl1_01).set_address(parse_mac(id(flower1_mac).c_str()));
          id(fl2_01).set_address(parse_mac(id(flower2_mac).c_str()));
          id(fl3_01).set_address(parse_mac(id(flower3_mac).c_str()));
          id(fl4_01).set_address(parse_mac(id(flower4_mac).c_str()));
          id(fl1_10).set_address(parse_mac(id(flower1_mac).c_str()));
          id(fl2_10).set_address(parse_mac(id(flower2_mac).c_str()));
          id(fl3_10).set_address(parse_mac(id(flower3_mac).c_str()));
          id(fl4_10).set_address(parse_mac(id(flower4_mac).c_str()));
          id(fl1_02).set_address(parse_mac(id(flower1_mac).c_str()));
          id(fl2_02).set_address(parse_mac(id(flower2_mac).c_str()));
          id(fl3_02).set_address(parse_mac(id(flower3_mac).c_str()));
          id(fl4_02).set_address(parse_mac(id(flower4_mac).c_str()));
          id(fl1_002).set_address(parse_mac(id(flower1_mac).c_str()));
          id(fl2_002).set_address(parse_mac(id(flower2_mac).c_str()));
          id(fl3_002).set_address(parse_mac(id(flower3_mac).c_str()));
          id(fl4_002).set_address(parse_mac(id(flower4_mac).c_str()));
      - lambda: |-
          auto update_select = [](int model, auto select_id) {
            if (model == 1)
              select_id->publish_state("HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor");
            else if (model == 2)
              select_id->publish_state("HHCCJCY10 Xiaomi MiFlora (Pink version)");
            else if (model == 3)
              select_id->publish_state("HHCCPOT002 Xiaomi VegTrug Grow Care Garden");
            else if (model == 4)
              select_id->publish_state("GCLS002 Generic Flora Sensor");
          };

          update_select(id(flower1_sensor_model), id(flower1_sensor_model_select));
          update_select(id(flower2_sensor_model), id(flower2_sensor_model_select));
          update_select(id(flower3_sensor_model), id(flower3_sensor_model_select));
          update_select(id(flower4_sensor_model), id(flower4_sensor_model_select));




text:
  - platform: template
    name: $mac 1
    id: flower1_mac_text
    mode: text
    icon: mdi:bluetooth
    lambda: |-
      return id(flower1_mac);
    set_action:
      - lambda: |-
          if (x.size() == 17) {
            id(flower1_mac) = x;
            ESP_LOGI("BLE", "–ù–æ–≤—ã–π MAC Flower1: %s", x.c_str());
          } else {
            ESP_LOGW("BLE", "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π MAC: %s", x.c_str());
          }
    web_server:
      sorting_group_id: group21

  - platform: template
    name: $mac 2
    id: flower2_mac_text
    mode: text
    icon: mdi:bluetooth
    lambda: |-
      return id(flower2_mac);
    set_action:
      - lambda: |-
          if (x.size() == 17) {
            id(flower2_mac) = x;
            ESP_LOGI("BLE", "–ù–æ–≤—ã–π MAC Flower2: %s", x.c_str());
          } else {
            ESP_LOGW("BLE", "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π MAC: %s", x.c_str());
          }
    web_server:
      sorting_group_id: group22

  - platform: template
    name: $mac 3
    id: flower3_mac_text
    mode: text
    icon: mdi:bluetooth
    lambda: |-
      return id(flower3_mac);
    set_action:
      - lambda: |-
          if (x.size() == 17) {
            id(flower3_mac) = x;
            ESP_LOGI("BLE", "–ù–æ–≤—ã–π MAC Flower3: %s", x.c_str());
          } else {
            ESP_LOGW("BLE", "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π MAC: %s", x.c_str());
          }
    web_server:
      sorting_group_id: group23

  - platform: template
    name: $mac 4
    id: flower4_mac_text
    mode: text
    icon: mdi:bluetooth
    lambda: |-
      return id(flower4_mac);
    set_action:
      - lambda: |-
          if (x.size() == 17) {
            id(flower4_mac) = x;
            ESP_LOGI("BLE", "–ù–æ–≤—ã–π MAC Flower4: %s", x.c_str());
          } else {
            ESP_LOGW("BLE", "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π MAC: %s", x.c_str());
          }
    web_server:
      sorting_group_id: group24


select:
  - platform: template
    name: $model_sensor 1
    id: flower1_sensor_model_select
    icon: mdi:chip
    options:
      - "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
      - "HHCCJCY10 Xiaomi MiFlora (Pink version)"
      - "HHCCPOT002 Xiaomi VegTrug Grow Care Garden"
      - "GCLS002 Generic Flora Sensor"
    optimistic: true
    initial_option: "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
    web_server:
      sorting_group_id: group21
    on_value:
      - lambda: |-
          if (x == "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor") {
            id(flower1_sensor_model) = 1;
          } else if (x == "HHCCJCY10 Xiaomi MiFlora (Pink version)") {
            id(flower1_sensor_model) = 2;
          } else if (x == "HHCCPOT002 Xiaomi VegTrug Grow Care Garden") {
            id(flower1_sensor_model) = 3;
          } else if (x == "GCLS002 Generic Flora Sensor") {
            id(flower1_sensor_model) = 4;
          }

  - platform: template
    name: $model_sensor 2
    id: flower2_sensor_model_select
    icon: mdi:chip
    options:
      - "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
      - "HHCCJCY10 Xiaomi MiFlora (Pink version)"
      - "HHCCPOT002 Xiaomi VegTrug Grow Care Garden"
      - "GCLS002 Generic Flora Sensor"
    optimistic: true
    initial_option: "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
    web_server:
      sorting_group_id: group22
    on_value:
      - lambda: |-
          if (x == "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor") {
            id(flower2_sensor_model) = 1;
          } else if (x == "HHCCJCY10 Xiaomi MiFlora (Pink version)") {
            id(flower2_sensor_model) = 2;
          } else if (x == "HHCCPOT002 Xiaomi VegTrug Grow Care Garden") {
            id(flower2_sensor_model) = 3;
          } else if (x == "GCLS002 Generic Flora Sensor") {
            id(flower2_sensor_model) = 4;
          }

  - platform: template
    name: $model_sensor 3
    id: flower3_sensor_model_select
    icon: mdi:chip
    options:
      - "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
      - "HHCCJCY10 Xiaomi MiFlora (Pink version)"
      - "HHCCPOT002 Xiaomi VegTrug Grow Care Garden"
      - "GCLS002 Generic Flora Sensor"
    optimistic: true
    initial_option: "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
    web_server:
      sorting_group_id: group23
    on_value:
      - lambda: |-
          if (x == "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor") {
            id(flower3_sensor_model) = 1;
          } else if (x == "HHCCJCY10 Xiaomi MiFlora (Pink version)") {
            id(flower3_sensor_model) = 2;
          } else if (x == "HHCCPOT002 Xiaomi VegTrug Grow Care Garden") {
            id(flower3_sensor_model) = 3;
          } else if (x == "GCLS002 Generic Flora Sensor") {
            id(flower3_sensor_model) = 4;
          }

  - platform: template
    name: $model_sensor 4
    id: flower4_sensor_model_select
    icon: mdi:chip
    options:
      - "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
      - "HHCCJCY10 Xiaomi MiFlora (Pink version)"
      - "HHCCPOT002 Xiaomi VegTrug Grow Care Garden"
      - "GCLS002 Generic Flora Sensor"
    optimistic: true
    initial_option: "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor"
    web_server:
      sorting_group_id: group24
    on_value:
      - lambda: |-
          if (x == "HHCCJCY01 Xiaomi Mi Flower Care Plant Sensor") {
            id(flower4_sensor_model) = 1;
          } else if (x == "HHCCJCY10 Xiaomi MiFlora (Pink version)") {
            id(flower4_sensor_model) = 2;
          } else if (x == "HHCCPOT002 Xiaomi VegTrug Grow Care Garden") {
            id(flower4_sensor_model) = 3;
          } else if (x == "GCLS002 Generic Flora Sensor") {
            id(flower4_sensor_model) = 4;
          }



sensor:
# –ó–æ–Ω–∞ 1 hhccjcy01
  - platform: xiaomi_hhccjcy01
    mac_address: $fl1_mac
    id: fl1_01
    temperature:
      id: f1_temp_01
    moisture:
      id: f1_moist_01
    illuminance:
      id: f1_lux_01
    conductivity:
      id: f1_cond_01
    battery_level:
      id: f1_batt_01

  # –ó–æ–Ω–∞ 1 hhccjcy10
  - platform: xiaomi_hhccjcy10
    mac_address: $fl1_mac
    id: fl1_10
    temperature:
      id: f1_temp_10
    moisture:
      id: f1_moist_10
    illuminance:
      id: f1_lux_10
    conductivity:
      id: f1_cond_10
    battery_level:
      id: f1_batt_10

  # –ó–æ–Ω–∞ 1 HHCCPOT002 ‚Äî —Ç–æ–ª—å–∫–æ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å
  - platform: xiaomi_hhccpot002
    mac_address: $fl1_mac
    id: fl1_02
    moisture:
      id: f1_moist_002
    conductivity:
      id: f1_cond_002

  # –ó–æ–Ω–∞ 1 GCLS002 ‚Äî –±–µ–∑ –±–∞—Ç–∞—Ä–µ–∏
  - platform: xiaomi_gcls002
    mac_address: $fl1_mac
    id: fl1_002
    temperature:
      id: f1_temp_gcls
    moisture:
      id: f1_moist_gcls
    illuminance:
      id: f1_lux_gcls
    conductivity:
      id: f1_cond_gcls


  # –ó–æ–Ω–∞ 2 hhccjcy01
  - platform: xiaomi_hhccjcy01
    mac_address: $fl2_mac
    id: fl2_01
    temperature:
      id: f2_temp_01
    moisture:
      id: f2_moist_01
    illuminance:
      id: f2_lux_01
    conductivity:
      id: f2_cond_01
    battery_level:
      id: f2_batt_01

  # –ó–æ–Ω–∞ 2 hhccjcy10
  - platform: xiaomi_hhccjcy10
    mac_address: $fl2_mac
    id: fl2_10
    temperature:
      id: f2_temp_10
    moisture:
      id: f2_moist_10
    illuminance:
      id: f2_lux_10
    conductivity:
      id: f2_cond_10
    battery_level:
      id: f2_batt_10

  # –ó–æ–Ω–∞ 2 HHCCPOT002 ‚Äî —Ç–æ–ª—å–∫–æ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å
  - platform: xiaomi_hhccpot002
    mac_address: $fl2_mac
    id: fl2_02
    moisture:
      id: f2_moist_002
    conductivity:
      id: f2_cond_002

  # –ó–æ–Ω–∞ 1 GCLS002 ‚Äî –±–µ–∑ –±–∞—Ç–∞—Ä–µ–∏
  - platform: xiaomi_gcls002
    mac_address: $fl2_mac
    id: fl2_002
    temperature:
      id: f2_temp_gcls
    moisture:
      id: f2_moist_gcls
    illuminance:
      id: f2_lux_gcls
    conductivity:
      id: f2_cond_gcls


  # –ó–æ–Ω–∞ 3 hhccjcy01
  - platform: xiaomi_hhccjcy01
    mac_address: $fl3_mac
    id: fl3_01
    temperature:
      id: f3_temp_01
    moisture:
      id: f3_moist_01
    illuminance:
      id: f3_lux_01
    conductivity:
      id: f3_cond_01
    battery_level:
      id: f3_batt_01

  # –ó–æ–Ω–∞ 3 hhccjcy10
  - platform: xiaomi_hhccjcy10
    mac_address: $fl3_mac
    id: fl3_10
    temperature:
      id: f3_temp_10
    moisture:
      id: f3_moist_10
    illuminance:
      id: f3_lux_10
    conductivity:
      id: f3_cond_10
    battery_level:
      id: f3_batt_10

  # –ó–æ–Ω–∞ 3 HHCCPOT002 ‚Äî —Ç–æ–ª—å–∫–æ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å
  - platform: xiaomi_hhccpot002
    mac_address: $fl3_mac
    id: fl3_02
    moisture:
      id: f3_moist_002
    conductivity:
      id: f3_cond_002

  # –ó–æ–Ω–∞ 3 GCLS002 ‚Äî –±–µ–∑ –±–∞—Ç–∞—Ä–µ–∏
  - platform: xiaomi_gcls002
    mac_address: $fl3_mac
    id: fl3_002
    temperature:
      id: f3_temp_gcls
    moisture:
      id: f3_moist_gcls
    illuminance:
      id: f3_lux_gcls
    conductivity:
      id: f3_cond_gcls


  # –ó–æ–Ω–∞ 4 hhccjcy01
  - platform: xiaomi_hhccjcy01
    mac_address: $fl4_mac
    id: fl4_01
    temperature:
      id: f4_temp_01
    moisture:
      id: f4_moist_01
    illuminance:
      id: f4_lux_01
    conductivity:
      id: f4_cond_01
    battery_level:
      id: f4_batt_01

  # –ó–æ–Ω–∞ 4 hhccjcy10
  - platform: xiaomi_hhccjcy10
    mac_address: $fl4_mac
    id: fl4_10
    temperature:
      id: f4_temp_10
    moisture:
      id: f4_moist_10
    illuminance:
      id: f4_lux_10
    conductivity:
      id: f4_cond_10
    battery_level:
      id: f4_batt_10

  # –ó–æ–Ω–∞ 4 HHCCPOT002 ‚Äî —Ç–æ–ª—å–∫–æ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å
  - platform: xiaomi_hhccpot002
    mac_address: $fl4_mac
    id: fl4_02
    moisture:
      id: f4_moist_002
    conductivity:
      id: f4_cond_002

  # –ó–æ–Ω–∞ 4 GCLS002 ‚Äî –±–µ–∑ –±–∞—Ç–∞—Ä–µ–∏
  - platform: xiaomi_gcls002
    mac_address: $fl4_mac
    id: fl4_002
    temperature:
      id: f4_temp_gcls
    moisture:
      id: f4_moist_gcls
    illuminance:
      id: f4_lux_gcls
    conductivity:
      id: f4_cond_gcls

# üå∏ FLOWER 1

  - platform: template
    name: $temp 1
    id: f1_temp
    icon: mdi:thermometer
    unit_of_measurement: "¬∞C"
    accuracy_decimals: 1
    web_server:
      sorting_weight: 1
      sorting_group_id: group1
    lambda: |-
      if (id(flower1_sensor_model) == 1) return id(f1_temp_01).state;
      else if (id(flower1_sensor_model) == 2) return id(f1_temp_10).state;
      else if (id(flower1_sensor_model) == 3) return NAN;
      else if (id(flower1_sensor_model) == 4) return id(f1_temp_gcls).state;
      else return NAN;

  - platform: template
    name: $moist 1
    id: f1_moist
    icon: mdi:water-percent
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 2
      sorting_group_id: group1
    lambda: |-
      if (id(flower1_sensor_model) == 1) return id(f1_moist_01).state;
      else if (id(flower1_sensor_model) == 2) return id(f1_moist_10).state;
      else if (id(flower1_sensor_model) == 3) return id(f1_moist_002).state;
      else if (id(flower1_sensor_model) == 4) return id(f1_moist_gcls).state;
      else return NAN;

  - platform: template
    name: $light 1
    id: f1_light
    icon: mdi:white-balance-sunny
    unit_of_measurement: "lx"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 3
      sorting_group_id: group1
    lambda: |-
      if (id(flower1_sensor_model) == 1) return id(f1_lux_01).state;
      else if (id(flower1_sensor_model) == 2) return id(f1_lux_10).state;
      else if (id(flower1_sensor_model) == 3) return NAN;
      else if (id(flower1_sensor_model) == 4) return id(f1_lux_gcls).state;
      else return NAN;

  - platform: template
    name: $cond 1
    id: f1_cond
    icon: mdi:flash
    unit_of_measurement: "ŒºS/cm"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 4
      sorting_group_id: group1
    lambda: |-
      if (id(flower1_sensor_model) == 1) return id(f1_cond_01).state;
      else if (id(flower1_sensor_model) == 2) return id(f1_cond_10).state;
      else if (id(flower1_sensor_model) == 3) return id(f1_cond_002).state;
      else if (id(flower1_sensor_model) == 4) return id(f1_cond_gcls).state;
      else return NAN;

  - platform: template
    name: $batt 1
    id: f1_batt
    icon: mdi:battery
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 5
      sorting_group_id: group1
    lambda: |-
      if (id(flower1_sensor_model) == 1) return id(f1_batt_01).state;
      else if (id(flower1_sensor_model) == 2) return id(f1_batt_10).state;
      else if (id(flower1_sensor_model) == 3) return NAN;
      else if (id(flower1_sensor_model) == 4) return NAN;
      else return NAN;


# üåø FLOWER 2

  - platform: template
    name: $temp 2
    id: f2_temp
    icon: mdi:thermometer
    unit_of_measurement: "¬∞C"
    accuracy_decimals: 1
    web_server:
      sorting_weight: 1
      sorting_group_id: group2
    lambda: |-
      if (id(flower2_sensor_model) == 1) return id(f2_temp_01).state;
      else if (id(flower2_sensor_model) == 2) return id(f2_temp_10).state;
      else if (id(flower2_sensor_model) == 3) return NAN;
      else if (id(flower2_sensor_model) == 4) return id(f2_temp_gcls).state;
      else return NAN;

  - platform: template
    name: $moist 2
    id: f2_moist
    icon: mdi:water-percent
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 2
      sorting_group_id: group2
    lambda: |-
      if (id(flower2_sensor_model) == 1) return id(f2_moist_01).state;
      else if (id(flower2_sensor_model) == 2) return id(f2_moist_10).state;
      else if (id(flower2_sensor_model) == 3) return id(f2_moist_002).state;
      else if (id(flower2_sensor_model) == 4) return id(f2_moist_gcls).state;
      else return NAN;

  - platform: template
    name: $light 2
    id: f2_light
    icon: mdi:white-balance-sunny
    unit_of_measurement: "lx"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 3
      sorting_group_id: group2
    lambda: |-
      if (id(flower2_sensor_model) == 1) return id(f2_lux_01).state;
      else if (id(flower2_sensor_model) == 2) return id(f2_lux_10).state;
      else if (id(flower2_sensor_model) == 3) return NAN;
      else if (id(flower2_sensor_model) == 4) return id(f2_lux_gcls).state;
      else return NAN;

  - platform: template
    name: "–ü–∏—Ça—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
    id: f2_cond
    icon: mdi:flash
    unit_of_measurement: "ŒºS/cm"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 4
      sorting_group_id: group2
    lambda: |-
      if (id(flower2_sensor_model) == 1) return id(f2_cond_01).state;
      else if (id(flower2_sensor_model) == 2) return id(f2_cond_10).state;
      else if (id(flower2_sensor_model) == 3) return id(f2_cond_002).state;
      else if (id(flower2_sensor_model) == 4) return id(f2_cond_gcls).state;
      else return NAN;

  - platform: template
    name: $batt 2
    id: f2_batt
    icon: mdi:battery
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 5
      sorting_group_id: group2
    lambda: |-
      if (id(flower2_sensor_model) == 1) return id(f2_batt_01).state;
      else if (id(flower2_sensor_model) == 2) return id(f2_batt_10).state;
      else if (id(flower2_sensor_model) == 3) return NAN;
      else if (id(flower2_sensor_model) == 4) return NAN;
      else return NAN;

# üåº FLOWER 3

  - platform: template
    name: $temp 3
    id: f3_temp
    icon: mdi:thermometer
    unit_of_measurement: "¬∞C"
    accuracy_decimals: 1
    web_server:
      sorting_weight: 1
      sorting_group_id: group3
    lambda: |-
      if (id(flower3_sensor_model) == 1) return id(f3_temp_01).state;
      else if (id(flower3_sensor_model) == 2) return id(f3_temp_10).state;
      else if (id(flower3_sensor_model) == 3) return NAN;
      else if (id(flower3_sensor_model) == 4) return id(f3_temp_gcls).state;
      else return NAN;

  - platform: template
    name: $moist 3
    id: f3_moist
    icon: mdi:water-percent
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 2
      sorting_group_id: group3
    lambda: |-
      if (id(flower3_sensor_model) == 1) return id(f3_moist_01).state;
      else if (id(flower3_sensor_model) == 2) return id(f3_moist_10).state;
      else if (id(flower3_sensor_model) == 3) return id(f3_moist_002).state;
      else if (id(flower3_sensor_model) == 4) return id(f3_moist_gcls).state;
      else return NAN;

  - platform: template
    name: $light 3
    id: f3_light
    icon: mdi:white-balance-sunny
    unit_of_measurement: "lx"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 3
      sorting_group_id: group3
    lambda: |-
      if (id(flower3_sensor_model) == 1) return id(f3_lux_01).state;
      else if (id(flower3_sensor_model) == 2) return id(f3_lux_10).state;
      else if (id(flower3_sensor_model) == 3) return NAN;
      else if (id(flower3_sensor_model) == 4) return id(f3_lux_gcls).state;
      else return NAN;

  - platform: template
    name: $cond 3
    id: f3_cond
    icon: mdi:flash
    unit_of_measurement: "ŒºS/cm"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 4
      sorting_group_id: group3
    lambda: |-
      if (id(flower3_sensor_model) == 1) return id(f3_cond_01).state;
      else if (id(flower3_sensor_model) == 2) return id(f3_cond_10).state;
      else if (id(flower3_sensor_model) == 3) return id(f3_cond_002).state;
      else if (id(flower3_sensor_model) == 4) return id(f3_cond_gcls).state;
      else return NAN;

  - platform: template
    name: $batt 3
    id: f3_batt
    icon: mdi:battery
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 5
      sorting_group_id: group3
    lambda: |-
      if (id(flower3_sensor_model) == 1) return id(f3_batt_01).state;
      else if (id(flower3_sensor_model) == 2) return id(f3_batt_10).state;
      else if (id(flower3_sensor_model) == 3) return NAN;
      else if (id(flower3_sensor_model) == 4) return NAN;
      else return NAN;

# üå∫ FLOWER 4

  - platform: template
    name: $temp 4
    id: f4_temp
    icon: mdi:thermometer
    unit_of_measurement: "¬∞C"
    accuracy_decimals: 1
    web_server:
      sorting_weight: 1
      sorting_group_id: group4
    lambda: |-
      if (id(flower4_sensor_model) == 1) return id(f4_temp_01).state;
      else if (id(flower4_sensor_model) == 2) return id(f4_temp_10).state;
      else if (id(flower4_sensor_model) == 3) return NAN;
      else if (id(flower4_sensor_model) == 4) return id(f4_temp_gcls).state;
      else return NAN;

  - platform: template
    name: $moist 4
    id: f4_moist
    icon: mdi:water-percent
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 2
      sorting_group_id: group4
    lambda: |-
      if (id(flower4_sensor_model) == 1) return id(f4_moist_01).state;
      else if (id(flower4_sensor_model) == 2) return id(f4_moist_10).state;
      else if (id(flower4_sensor_model) == 3) return id(f4_moist_002).state;
      else if (id(flower4_sensor_model) == 4) return id(f4_moist_gcls).state;
      else return NAN;

  - platform: template
    name: $light 4
    id: f4_light
    icon: mdi:white-balance-sunny
    unit_of_measurement: "lx"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 3
      sorting_group_id: group4
    lambda: |-
      if (id(flower4_sensor_model) == 1) return id(f4_lux_01).state;
      else if (id(flower4_sensor_model) == 2) return id(f4_lux_10).state;
      else if (id(flower4_sensor_model) == 3) return NAN;
      else if (id(flower4_sensor_model) == 4) return id(f4_lux_gcls).state;
      else return NAN;

  - platform: template
    name: $cond 4
    id: f4_cond
    icon: mdi:flash
    unit_of_measurement: "ŒºS/cm"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 4
      sorting_group_id: group4
    lambda: |-
      if (id(flower4_sensor_model) == 1) return id(f4_cond_01).state;
      else if (id(flower4_sensor_model) == 2) return id(f4_cond_10).state;
      else if (id(flower4_sensor_model) == 3) return id(f4_cond_002).state;
      else if (id(flower4_sensor_model) == 4) return id(f4_cond_gcls).state;
      else return NAN;

  - platform: template
    name: $batt 4
    id: f4_batt
    icon: mdi:battery
    unit_of_measurement: "%"
    accuracy_decimals: 0
    web_server:
      sorting_weight: 5
      sorting_group_id: group4
    lambda: |-
      if (id(flower4_sensor_model) == 1) return id(f4_batt_01).state;
      else if (id(flower4_sensor_model) == 2) return id(f4_batt_10).state;
      else if (id(flower4_sensor_model) == 3) return NAN;
      else if (id(flower4_sensor_model) == 4) return NAN;
      else return NAN;







